{# We find the home page specifically to access its 'ecl_exam' header data #}
{% set home_page = page.find('/') %}
{% set exam_data = home_page.header.ecl_exam %}

{% if exam_data.active == '1' and page.home %}
<div class="reveal large ecl-announcement-modal" 
     id="eclExamModal" 
     data-reveal 
     data-close-on-click="false" 
     data-active="{{ exam_data.active }}"
     data-exam-date="{{ exam_data.date|date("Y-m-d H:i") }}">
     
    <div class="modal-content text-center">
        <h2 class="text-secondary">ðŸŽ“ {{ exam_data.session }}</h2>
        <hr>
        <p class="lead">Les inscriptions pour la session officielle d'examens ECL sont ouvertes !</p>
        
        <div class="callout secondary">
            <h5>Date de l'examen :</h5>
            {# We use 'date' filter to format the string from modular.md #}
            <p class="h4"><strong>{{ exam_data.date|date("d F Y") }}</strong></p>
        </div>

        <p>Le CCL Center vous accompagne dans votre rÃ©ussite. Veuillez confirmer avoir pris connaissance de cette session pour continuer au site.</p>
        
        <div class="checkbox-container grid-x align-center-middle">
            <input id="ack-check" type="checkbox">
            <label for="ack-check">J'ai compris, je souhaite accÃ©der au site</label>
        </div>

        <div id="modal-footer" style="min-height: 50px;">
            <button class="button success hidden shadow" id="close-ecl-modal" data-close type="button">
                Fermer
            </button>
        </div>
    </div>
</div>

<style>
/* Modal takes up most of the window */
.ecl-announcement-modal { min-height: 70vh; padding: 3rem !important; border-radius: 12px; border: none; box-shadow: 0 10px 50px rgba(0,0,0,0.3); }
.hidden { display: none !important; }
.checkbox-container { margin: 2rem 0; font-size: 1.1rem; }
.checkbox-container label { cursor: pointer; font-weight: bold; display: block; }
input[type="checkbox"] { transform: scale(1.5) translateY(6px); margin-right: 15px; display: block; }
#modal-footer .button { font-weight: bold; padding: 1rem 2rem; }
</style>
{% endif %}